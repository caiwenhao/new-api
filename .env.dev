# New API 开发环境配置文件
# 复制此文件为 .env 并根据需要修改配置

# ===========================================
# 基础服务配置
# ===========================================

# 应用端口
PORT=3000

# 前端基础URL（开发环境通常不需要设置）
# FRONTEND_BASE_URL=http://localhost:5173

# ===========================================
# 数据库配置
# ===========================================

# MySQL 数据库连接字符串
SQL_DSN=root:123456@tcp(localhost:3306)/new-api?parseTime=true&charset=utf8mb4&loc=Local

# 日志数据库连接字符串（可选，不设置则使用主数据库）
# LOG_SQL_DSN=root:123456@tcp(localhost:3306)/new-api-logs?parseTime=true&charset=utf8mb4&loc=Local

# SQLite 数据库路径（如果使用 SQLite）
# SQLITE_PATH=./data/new-api.db

# 数据库连接池配置
SQL_MAX_IDLE_CONNS=10
SQL_MAX_OPEN_CONNS=100
SQL_MAX_LIFETIME=60

# ===========================================
# Redis 缓存配置
# ===========================================

# Redis 连接字符串
REDIS_CONN_STRING=redis://localhost:6379/0

# Redis 连接池大小
REDIS_POOL_SIZE=10

# 内存缓存启用（有 Redis 时自动启用）
MEMORY_CACHE_ENABLED=true

# 同步频率（秒）
SYNC_FREQUENCY=60

# ===========================================
# 开发调试配置
# ===========================================

# 调试模式
DEBUG=true

# Gin 运行模式
GIN_MODE=debug

# 启用 pprof 性能分析
ENABLE_PPROF=true

# 错误日志启用
ERROR_LOG_ENABLED=true

# ===========================================
# 安全配置
# ===========================================

# 会话密钥（开发环境，生产环境必须更改）
SESSION_SECRET=dev_session_secret_change_in_production_2024

# 加密密钥（用于加密数据库内容）
CRYPTO_SECRET=dev_crypto_secret_change_in_production_2024

# ===========================================
# 功能配置
# ===========================================

# 为新注册用户生成默认令牌
GENERATE_DEFAULT_TOKEN=true

# 流模式超时时间（秒）
STREAMING_TIMEOUT=120

# 所有请求超时时间（秒，0表示不限制）
RELAY_TIMEOUT=0

# 更新异步任务（Midjourney、Suno等）
UPDATE_TASK=true

# 是否统计图片token
GET_MEDIA_TOKEN=true

# 非流模式下是否统计图片token
GET_MEDIA_TOKEN_NOT_STREAM=true

# 是否覆盖客户端stream_options参数
FORCE_STREAM_OPTION=true

# ===========================================
# 模型配置
# ===========================================

# Gemini 模型最大图片数量
GEMINI_VISION_MAX_IMAGE_NUM=16

# Cohere 安全设置 (NONE, CONTEXTUAL, STRICT)
COHERE_SAFETY_SETTING=NONE

# Gemini 安全设置
GEMINI_SAFETY_SETTING=BLOCK_NONE

# Azure 默认 API 版本
AZURE_DEFAULT_API_VERSION=2025-04-01-preview

# ===========================================
# 文件处理配置
# ===========================================

# 最大文件下载大小（MB）
MAX_FILE_DOWNLOAD_MB=20

# ===========================================
# 通知配置
# ===========================================

# 通知限制持续时间（分钟）
NOTIFICATION_LIMIT_DURATION_MINUTE=10

# 用户通知在指定时间内的最大数量
NOTIFY_LIMIT_COUNT=2

# ===========================================
# 速率限制配置
# ===========================================

# 全局 API 速率限制启用
GLOBAL_API_RATE_LIMIT_ENABLE=true

# 全局 API 速率限制数量
GLOBAL_API_RATE_LIMIT=180

# 全局 API 速率限制持续时间（秒）
GLOBAL_API_RATE_LIMIT_DURATION=180

# 全局 Web 速率限制启用
GLOBAL_WEB_RATE_LIMIT_ENABLE=true

# 全局 Web 速率限制数量
GLOBAL_WEB_RATE_LIMIT=60

# 全局 Web 速率限制持续时间（秒）
GLOBAL_WEB_RATE_LIMIT_DURATION=180

# ===========================================
# 批量更新配置
# ===========================================

# 批量更新启用
BATCH_UPDATE_ENABLED=true

# 批量更新间隔（秒）
BATCH_UPDATE_INTERVAL=5

# 渠道更新频率（秒）
CHANNEL_UPDATE_FREQUENCY=30

# 渠道测试频率（秒）
CHANNEL_TEST_FREQUENCY=10

# ===========================================
# 多节点部署配置（开发环境通常不需要）
# ===========================================

# 节点类型 (master/slave)
NODE_TYPE=master

# 轮询间隔（秒）
POLLING_INTERVAL=1

# ===========================================
# 第三方服务配置
# ===========================================

# Dify 调试模式（输出工作流和节点信息）
DIFY_DEBUG=true

# ===========================================
# 时区配置
# ===========================================

# 时区设置
TZ=Asia/Shanghai

# ===========================================
# 开发环境特殊配置
# ===========================================

# 开发环境标识
NODE_ENV=development

# 日志级别
LOG_LEVEL=debug

# 跨域配置（开发环境）
CORS_ALLOW_ORIGINS=http://localhost:5173,http://localhost:3000

# 热重载配置
HOT_RELOAD=true
